<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type='text/javascript' src='./dist/core.js'></script>
    <script type='text/javascript'>
        var $ = require('jquery');
        var q = require('q');
        var core = require('core');

        $(function() {
            var model = false;
            var modelAPI = false;
            var currentLayer = false;
            var circleCount = 0;

            $('.loadBSDC').click(function() {
                if (!modelAPI) {
                    core.API.loadModule('js-bsdc').then(function(JSBSDC) {
                        modelAPI = JSBSDC.API;
                        model = modelAPI.Model();
                        loadContent();
                    });
                }
            });

            function loadContent() {
                $('.content').html(
                    "<button class='addLayer'>Add Layer</button>" +
                    "<button class='addCircle'>Add Circle</button>" +
                    "<span class='circleCount'></span>" +
                    "<hr />" +
                    "<pre><div class='sub-content'></div></pre>"
                );

                $('.addLayer').click(function() {
                    if (model) {
                        currentLayer = modelAPI.Layer();
                        model.addLayer(currentLayer);
                        $('.sub-content').html(JSON.stringify(model.toObject(), null, '    '));
                    } else {
                        alert('please include the model module');
                    }
                });

                $('.addCircle').click(function() {
                    if (model) {
                        circleCount++;
//                        $('.circleCount').html(circleCount);
                        currentLayer.addElement(modelAPI.Components.Circle());
                        $('.sub-content').html(JSON.stringify(model.toObject(), null, '    '));
                    } else {
                        alert('please include the model module');
                    }
                });
            }
        });

    </script>
</head>
<body>
    <button class='loadBSDC'>Load Model</button>
    <div class='content'>
    </div>
</body>
</html>
